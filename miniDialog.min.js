/*!
 * miniDialog
 * Author: jieyou Qin
 * see https://github.com/jieyou/miniDialog
 */
!function(a,b,c){function m(a){var c=a.$,d=(h.width()-c.outerWidth(!0))/2,e=(h.height()-c.outerHeight(!0))/(1+1.61803398875);c&&(l?c.css({left:b.documentElement.scrollLeft+d,top:b.documentElement.scrollTop+e}):c.css({left:d,top:e}))}function n(a){a.css({width:g.width(),height:g.height()})}function o(b){var c,e,i,g=this;a.isPlainObject(b)?a.each(d,function(a,c){!d.hasOwnProperty(a)||b.hasOwnProperty(a)&&typeof b[a]==typeof d[a]||(b[a]=c)}):b=d,a.each(b,function(a,b){g[a]=b}),g.isShow=!1,g.$=a(k).addClass(g.warpperCssClass).css({width:g.width,height:g.height}),g.$title=a(k).addClass(g.titleCssClass).html(g.title).appendTo(g.$),g.$contentOuter=a(k).addClass(g.contentOuterCssClass).appendTo(g.$),g.$content=a(k).addClass(g.contentCssClass).html(g.content).appendTo(g.$contentOuter),c=[],i=g.buttons.length,a.each(g.buttons,function(b,d){e=a(k).addClass(g.buttonCssClass).text(d.value).on("click",function(a){d.click&&"function"==typeof d.click?d.click.call(this,a,g)!==!1&&g.hide():g.hide()}),i==b+1&&e.addClass(g.lastButtonCssClass),d.type&&e.addClass(g.otherTypeButtonCssClassPrefix+d.type),c.push(e)}),g.$buttonsArea=a(k).addClass(g.buttonsAreaCssClass),g.$buttonsArea.append.apply(g.$buttonsArea,c).appendTo(g.$),g.closeX&&(g.$closeX=a(k).addClass(g.closeXCssClass).appendTo(g.$),g.$closeX.on("click",function(a){g.clickCloseX&&"function"==typeof g.clickCloseX?g.clickCloseX.call(this,a,g)!==!1&&g.hide():g.hide()})),m(g),h.on("resize",function(){m(g)}),l&&h.on("scroll",function(){m(g)}),g.$.appendTo(f),g.init&&"function"==typeof g.init&&g.init.call(g),g.autoShow&&g.show()}function p(a){return new o(a)}var i,d={title:"\u6d88\u606f",content:"",width:200,height:150,mask:!0,closeX:!1,autoShow:!0,clickCloseX:function(){},init:function(){},warpperCssClass:"miniDialog_wrapper",titleCssClass:"miniDialog_title",contentOuterCssClass:"miniDialog_content_outer",contentCssClass:"miniDialog_content",buttonsAreaCssClass:"miniDialog_buttons_area",buttonCssClass:"miniDialog_button",otherTypeButtonCssClassPrefix:"miniDialog_button_",lastButtonCssClass:"miniDialog_last_button",closeXCssClass:"miniDialog_close_x",buttons:[{value:"\u786e\u5b9a"}]},e={maskCssClass:"miniDialog_mask"},f=a("body"),g=a(b),h=a(c),j=0,k="<div></div>",l=/msie 6/i.test(navigator.userAgent);o.prototype.show=function(){!this.isShow&&this.$&&(this.mask&&(i?i.show():(i=a(k).addClass(e.maskCssClass),l&&(n(i),h.on("resize",function(){n(i)})),i.appendTo(f)),j++),this.$.show(),this.isShow=!0)},o.prototype.hide=function(){this.isShow&&(this.isShow=!1,this.mask&&(j--,i&&0==j&&i.hide()),this.$&&this.$.hide())},o.prototype.remove=function(){this.hide(),this.$.remove()},p.config={defaultOptions:d,otherOptions:e},p.alert=function(b,c,d,e){return new o(a.extend({content:b,buttons:[{value:"\u786e\u5b9a",click:function(a,b){c.call(this,a,b),e||b.remove()}}]},d))},p.confirm=function(b,c,d,e,f){return new o(a.extend({content:b,buttons:[{value:"\u786e\u5b9a",click:function(a,b){c.call(this,a,b),f||b.remove()}},{value:"\u53d6\u6d88",type:"secondary",click:function(a,b){d.call(this,a,b),f||b.remove()}}]},e))},p.prompt=function(b,c,d,e,f,g){var h="miniDialog_prompt_input";return new o(a.extend({content:['<div style="margin-bottom:5px">',b,'</div><div><input class="',h,'" style="width:175px;padding:6px 4px" value="',c,'"/></div>'].join(""),buttons:[{value:"\u786e\u5b9a",click:function(a,b){d.call(this,a,b,b.$content.find("input."+h).val()),g||b.remove()}},{value:"\u53d6\u6d88",type:"secondary",click:function(a,b){e.call(this,a,b,b.$content.find("input."+h).val()),g||b.remove()}}]},f))},c.miniDialog=p}($,document,window);